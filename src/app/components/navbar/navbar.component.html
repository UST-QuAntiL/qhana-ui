<mat-toolbar class="nav-bar" color="primary">
    <a class="logo-link" [routerLink]="['/']">
        <img class="app-logo" height="3rem" src="assets/QHAna_logo_notext_inv.png" alt="QHAna logo">
        <span>{{title}}</span>
    </a>

    <ng-container *ngIf="(currentExperiment|async) != null">
        <a class="navigation-link" mat-button [routerLink]="['/experiments', (experimentId|async), 'info']"
            routerLinkActive="active">
            Info
        </a>
        <a class="navigation-link" mat-button [routerLink]="['/experiments', (experimentId|async), 'workspace']"
            routerLinkActive="active">
            Workspace
        </a>
        <a class="navigation-link" mat-button [routerLink]="['/experiments', (experimentId|async), 'data']"
            routerLinkActive="active">
            Data
        </a>
        <a class="navigation-link" mat-button [routerLink]="['/experiments', (experimentId|async), 'timeline']"
            routerLinkActive="active">
            Timeline
        </a>
        <a class="navigation-link" mat-button
            [routerLink]="['/experiments', (experimentId|async), 'extra', tab.resourceKey?.uiTemplateTabId]"
            routerLinkActive="active" *ngFor="let tab of extraTabs">
            {{tab.name}}
        </a>
    </ng-container>

    <div class="toolbar-spacer"></div>

    <div [hidden]="(currentExperiment|async) == null">
        <span>{{currentExperiment|async}}</span>
        <a class="navigation-link" mat-icon-button [hidden]="(currentExperiment|async) == null" [routerLink]="['/']"
            aria-label="change experiment">
            <mat-icon>swap_horiz</mat-icon>
        </a>
    </div>
    <button class="downloads-button" mat-button [matMenuTriggerFor]="downloadList" *ngIf="!exportListIsEmpty()">
        <mat-icon [matBadge]="downloadBadgeCounter | async" [matBadgeHidden]="!(downloadBadgeCounter | async)"
            matBadgeColor="warn" matBadgeSize="small" (click)="resetBadge()">download</mat-icon>
    </button>
    <mat-menu class="download" #downloadList="matMenu" yPosition="below" xPosition="before">
        <div class="download-item" *ngFor="let export of exportList | async; trackBy:trackExport">
            <div class="download-container">
                <span>{{export.name}}</span>
                <div class="toolbar-spacer"></div>
                <a class="download-button" role="button" mat-raised-button color="primary"
                    [disabled]="export.status != 'SUCCESS'" href="{{export.fileLink}}" target="_blank">Download</a>
                <button class="delete-button" mat-icon-button aria-label="Delete"
                    (click)="deleteExport(export.experimentId, export.exportId); $event.stopPropagation()">
                    <mat-icon>delete</mat-icon>
                </button>
            </div>
            <div class="download-container">
                <mat-progress-bar class="download-progress"
                    [mode]="export.status == 'PENDING' ? 'indeterminate' : 'determinate'" [value]="100"
                    [color]="export.status == 'FAILURE' ? 'warn' : 'primary'">
                </mat-progress-bar>
            </div>
        </div>
    </mat-menu>
    <a class="settings-link" [routerLink]="['/settings']">
        <mat-icon aria-hidden="false" aria-label="Settings">settings</mat-icon>
    </a>
</mat-toolbar>
