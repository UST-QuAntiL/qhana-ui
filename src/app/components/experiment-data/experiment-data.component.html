<div class="big-content">
    <div class="flex-header">
        <h1 class="t-page-headline">Experiment Data
            <button mat-icon-button class="arrow-button" (click)="onSort()"
                aria-label="sort>=0?'arrow_upward':'arrow_downward'">
                <mat-icon class="arrow">{{sort>=0?"arrow_upward":"arrow_downward"}}</mat-icon>
            </button>
        </h1>

        <mat-paginator #paginatorTop class="paginator"
            (page)="paginatorBottom.pageSize = $event.pageSize; paginatorBottom.pageIndex = $event.pageIndex; onPageChange($event)"
            [length]="collectionSize" [pageSize]="10" [pageSizeOptions]="[5, 10, 25, 100]" aria-label="Select page">
        </mat-paginator>
    </div>
    <div class="filter">
        <mat-form-field [style.width.%]="75">
            <mat-label>Search data</mat-label>
            <input [(ngModel)]="searchValue" matInput (keydown.enter)="updatePageContent()">
            <button mat-button matSuffix class="search-button" (click)="updatePageContent()">Ok</button>
        </mat-form-field>
        <mat-checkbox class="checkbox" color="primary" labelPosition="before" checked="true" (change)="onCheck()">All
            versions</mat-checkbox>
    </div>

    <div class="page-item-list">
        <mat-card class="page-item card" *ngFor="let data of experimentData | async">
            <mat-card-title>
                <a class="t-headline title-link"
                    [routerLink]="['/experiments', experimentId, 'data', data.name, {version: data.version.toString()}]">{{data.name}}</a>
            </mat-card-title>
            <mat-card-content>
                <dl class="data-details">
                    <div>
                        <dt>Version</dt>
                        <dd>{{data.version}}</dd>
                    </div>
                    <div>
                        <dt>Data Type</dt>
                        <dd>{{data.type}}</dd>
                    </div>
                    <div>
                        <dt>Content Type (mimetype)</dt>
                        <dd>{{data.contentType}}</dd>
                    </div>
                    <div>
                        <dt>Dowload link</dt>
                        <dd><a class="download-button" href="{{data.download}}" target="_blank"
                                rel="noopener noreferrer" mat-flat-button>Dowload as File</a></dd>
                    </div>
                    <div>
                        <dt>All versions for this file</dt>
                        <dd><button mat-flat-button (click)="reloadAllDataVersions(data.name)">Here</button></dd>
                    </div>
                </dl>
            </mat-card-content>
        </mat-card>
    </div>

    <mat-paginator #paginatorBottom class="paginator"
        (page)="paginatorTop.pageSize = $event.pageSize; paginatorTop.pageIndex = $event.pageIndex; onPageChange($event)"
        [length]="collectionSize" [pageSize]="10" [pageSizeOptions]="[5, 10, 25, 100]" aria-label="Select page">
    </mat-paginator>
    <div class="scroll-spacer"></div>
</div>
